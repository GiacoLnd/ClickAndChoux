{% extends 'base.html.twig' %}

{% block title %}Confirmation de la commande{% endblock %}

{% block body %}
    <div class="text-center">
        {% for label, messages in app.flashes %}
            {% for message in messages %}
                <div class="alert alert-{{ label }}">
                    {{ message }}
                </div>
            {% endfor %}
        {% endfor %}
    </div>
    <div class="commande-container">
        <h2 class="login-title">Votre commande :</h2>
            <div class="commande-list">
                {% for panier in commande.paniers %}
                    <div class="commande-product">
                        <a href="{{ path('produit_detail', {'id': panier.produit.id}) }}"><img src="/img/{{ panier.produit.image }}" alt="{{ panier.produit.nomProduit }}" class="catalog-image"></a>
                        <h3>{{ panier.produit.nomProduit }}</h3>
                        <p>Quantité : <strong>{{ panier.quantity }}</strong></p>
                        <p>Prix total : <strong>{{ panier.getTotalTTC()|number_format(2, ',', ' ') }} €</strong></p>
                    </div>
                {% endfor %}
            </div>
        
        <h3>Montant total : {{ commande.montantTotal|number_format(2, ',', ' ') }} €</h3>

        <h2 class="login-title">Adresse de livraison</h2>
        {{ form_start(form) }}
            <div class="livraison-container">
                {{ form_row(form.adresseLivraison) }}
                {{ form_row(form.codePostalLivraison) }}
                {{ form_row(form.villeLivraison) }}
                <button type="submit">Valider la commande</button>
            </div>
        {{ form_end(form) }}
    </div> 
{% endblock %}
